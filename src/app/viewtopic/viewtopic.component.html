<app-breadcrumbs [items]="breadcrumbs"></app-breadcrumbs>

<div id="pun-main" class="main">
  <div class="main-header">
    <h1><span>{{ topic().name }}</span></h1>
  </div>

  <div class="linkst">
    <div class="inbox">
      <p class="pagelink conl"><span><ng-container i18n="@@viewtopic.pages">Pages</ng-container>: <strong>1</strong></span></p>
      <p class="postlink conr"><a href="/post.php?tid=8"><span i18n="@@viewtopic.reply">Reply</span></a></p>
      <div class="clearer"></div>
    </div>
  </div>

  @if(isEpisode() && topic().episode != null) {
    <app-episode-header [episode]="topic().episode" ></app-episode-header>
  }


  @for(post of posts(); track post.id; let i = $index; let isEven = $even) {
  <div id="{{post.id}}" class="post" [class.altstyle]="isEven">
    <h3>
      <span class="post-meta">
        <a class="sharelink" rel="nofollow" href="#p{{ post.id }}" onclick="return false;" title="" i18n="@@viewtopic.share">Share</a>
        <a class="permalink" rel="nofollow">{{ post.date_created }}</a>
      </span>
      <strong class="post-number">{{ i + 1 }}</strong>
    </h3>
    <div class="container">
      <div class="post-main">
        <app-character-profile [post]="post"></app-character-profile>

        <div class="post-body">
          <div class="post-box">
            <div class="post-content" [innerHTML]="post.content_html"></div>
          </div>
        </div>
        <div class="clearer"></div>
      </div>
      <div class="post-footer">
        <div class="conl">
          <p class="post-contacts"><span><a href="/profile/{{ post.user_profile?.user_id }}" i18n="@@viewtopic.profile">Profile</a></span></p>
        </div>
        <div class="conr">
          <p class="post-links"><span><a href="/post.php?tid=8&amp;qid=21" i18n="@@viewtopic.quote">Quote</a></span></p>
        </div>
        <div class="clearer"></div>
      </div>
    </div>
  </div>
  }

  <div class="linksb">
    <div class="inbox">
      <p class="postlink conr"><a href="/post.php?tid=8"><span i18n="@@viewtopic.reply">Reply</span></a></p>
      <p class="pagelink conl"><span><ng-container i18n="@@viewtopic.pages">Pages</ng-container>: <strong>1</strong></span></p>
      <div class="clearer"></div>
    </div>
  </div>

  <div id="post-form" class="formal">
    <h2><span i18n="@@postform.quickReply">Quick reply</span></h2>
    <form id="post" class="container" (submit)="onSubmit($event)">
      <fieldset>
        <legend><span i18n="@@postform.writeMessage">Write your message and click "Send"</span></legend>
        <div class="fs-box hashelp">

          <div class="post-editor-container" style="display: flex; gap: 15px;">
            <div class="profile-sidebar" style="width: 200px;">
              <app-character-profile
                [accountName]="accountName"
                (characterSelected)="onCharacterSelected($event)">
              </app-character-profile>
            </div>

            <div class="form-content" style="flex: 1;">
              <app-post-form></app-post-form>
            </div>
          </div>

          <div class="buttons" style="margin-top: 15px; text-align: right;">
            <input type="submit" value="Send" i18n-value="@@postform.send" class="button">
            <input type="button" value="Preview" i18n-value="@@postform.preview" class="button">
          </div>

        </div>
      </fieldset>
    </form>
  </div>

  <div class="main-footer"></div>
</div>
