<div id="pun-main" class="main">
  <h1><span i18n="@@topiccreate.title">Start a new topic</span></h1>
  <div id="post-form" class="formal">
    <form id="post" class="container" method="post" action="https://viperstest.rusff.me/post.php?action=post&amp;fid=2">
      <fieldset id="post-preview" style="display:none">
        <legend><span i18n="@@topiccreate.previewMessage">Message preview</span></legend>
        <div class="fs-box">
          <div class="post-box">
            <div class="post-content">
            </div>
          </div>
        </div>
      </fieldset>
      <fieldset>
        <legend><span i18n="@@topiccreate.writeMessage">Write your message and click "Send"</span></legend>
        <div class="fs-box hashelp">
          <div id="formkey"></div>
          <div id="formetc" style="display:none"></div>
          <input type="hidden" name="form_sent" value="1" />
          <input type="hidden" name="form_user" value="viper" />
          <div id="form-buttons">
            <table cellspacing="0" cellpadding="0">
              <tbody>
              <tr>
                <td id="button-font" title="Font" i18n-title="@@postform.font" (click)="toggleArea('font')"><i class="bi bi-fonts"></i></td>
                <td id="button-size" title="Size" i18n-title="@@postform.size" (click)="toggleArea('size')"><i class="bi bi-type-h1"></i></td>
                <td id="button-bold" title="Bold" i18n-title="@@postform.bold" (click)="insertTag('b')"><i class="bi bi-type-bold"></i></td>
                <td id="button-italic" title="Italic" i18n-title="@@postform.italic" (click)="insertTag('i')"><i class="bi bi-type-italic"></i></td>
                <td id="button-underline" title="Underline" i18n-title="@@postform.underline" (click)="insertTag('u')"><i class="bi bi-type-underline"></i></td>
                <td id="button-strike" title="Strikethrough" i18n-title="@@postform.strike" (click)="insertTag('strike')"><i class="bi bi-type-strikethrough"></i></td>
                <td id="button-center" title="Center" i18n-title="@@postform.center" (click)="insertTag('center')"><i class="bi bi-text-center"></i></td>
                <td id="button-link" title="Link" i18n-title="@@postform.link" (click)="insertTag('url')"><i class="bi bi-link-45deg"></i></td>
                <td id="button-quote" title="Quote" i18n-title="@@postform.quote" (click)="insertTag('quote')"><i class="bi bi-quote"></i></td>
                <td id="button-code" title="Code" i18n-title="@@postform.code" (click)="insertTag('code')"><i class="bi bi-code-slash"></i></td>
                <td id="button-color" title="Color" i18n-title="@@postform.color" (click)="toggleArea('color')"><i class="bi bi-palette"></i></td>
                <td id="button-smile" title="Smile" i18n-title="@@postform.smile" (click)="toggleArea('smile')"><i class="bi bi-emoji-smile"></i></td>
              </tr>
              </tbody>
            </table>
          </div>
          <div id="tags">
            @if (activeArea === 'font') {
            <div class="container" id="font-area">
              @for (font of fonts; track font) {
              <div [style.font-family]="font" (click)="insertTag('font=' + font)">
                <span>{{ font }}</span>
              </div>
              }
            </div>
            }

            @if (activeArea === 'size') {
            <div class="container" id="size-area">
              @for (size of [8, 10, 12, 14, 16, 18, 20]; track size) {
              <div [style.font-size.px]="size" (click)="insertTag('size=' + size)">
                <span>{{ size }}px</span>
              </div>
              }
            </div>
            }

            @if (activeArea === 'color') {
            <div class="container" id="color-area">
              <table>
                <tr>
                  @for (color of colors; track color) {
                  <td [style.background-color]="color" (click)="insertTag('color=' + color)"></td>
                  }
                </tr>
              </table>
            </div>
            }
          </div>
          <p class="inputfield required longinput">
            <label for="fld3"><ng-container i18n="@@topiccreate.subject">Subject</ng-container> <em><ng-container i18n="@@topiccreate.required">(Required)</ng-container></em></label><br />
            <span class="input"><input id="fld3" type="text" name="req_subject" value="" size="80" maxlength="70" /></span>
          </p>

          <div class="post-editor-container">

            <div class="profile-sidebar">
              <div class="character-selector">
                <select (change)="onCharacterChange($event)">
                  <option value="account"><ng-container i18n="@@postform.account">Account</ng-container>: {{ accountName }}</option>
                  @for (char of characters; track char.id) {
                  <option [value]="char.id">{{ char.name }}</option>
                  }
                </select>
              </div>

              <div class="current-identity">
                <p class="identity-name">{{ currentName }}</p>
                <div class="avatar-box">
                  <img [src]="currentAvatarUrl" alt="Avatar" />
                </div>
              </div>
            </div>

            <div class="textarea-wrapper">
              <p class="areafield required">
                <span class="input"><textarea #messageField id="main-reply" name="req_message" rows="20"></textarea></span>
              </p>
            </div>
          </div>

          <p class="checkfield"><input type="checkbox" id="fld6" name="subscribe" value="1" /><label for="fld6" i18n="@@topiccreate.subscribe">Subscribe to this topic</label></p>
          <p class="checkfield"><input type="checkbox" id="fld10" name="firstpost" value="1" /><label for="fld10" i18n="@@topiccreate.firstPost">Pin the first post</label></p>
        </div>
      </fieldset>
      <p class="formsubmit"><input type="submit" class="button submit" name="submit" value="Send" i18n-value="@@topiccreate.send" accesskey="s" /> <input type="submit" class="button preview" name="preview" value="Preview" i18n-value="@@topiccreate.preview" accesskey="p" /></p>
    </form>
  </div>
  <div id="ajaxpostpreview"></div>
</div>
